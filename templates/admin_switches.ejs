<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin - Manage Switches</title>
    <link rel="stylesheet" href="/styles/admin_switches.css" />
  </head>
  <body>
    <h1>Admin - Manage Switches</h1>
    <div class="users-container">
      <!-- User 0 -->
      <div class="user-section">
        <h2>User: User 0</h2>
        <div class="switch-container">
          <button id="u0s0" class="main-switch <%= u0s0 ? 'on' : 'off' %>">
            <%= u0s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u0s1" class="sub-switch <%= u0s1 ? 'on' : 'off' %>">
            <%= u0s1 ? 'On' : 'Off' %>
          </button>
          <button id="u0s2" class="sub-switch <%= u0s2 ? 'on' : 'off' %>">
            <%= u0s2 ? 'On' : 'Off' %>
          </button>
          <button id="u0s3" class="sub-switch <%= u0s3 ? 'on' : 'off' %>">
            <%= u0s3 ? 'On' : 'Off' %>
          </button>
          <button id="u0s4" class="sub-switch <%= u0s4 ? 'on' : 'off' %>">
            <%= u0s4 ? 'On' : 'Off' %>
          </button>
          <button id="u0s5" class="sub-switch <%= u0s5 ? 'on' : 'off' %>">
            <%= u0s5 ? 'On' : 'Off' %>
          </button>
          <button id="u0s6" class="sub-switch <%= u0s6 ? 'on' : 'off' %>">
            <%= u0s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>

      <!-- User 1 -->
      <div class="user-section">
        <h2>User: User 1</h2>
        <div class="switch-container">
          <button id="u1s0" class="main-switch <%= u1s0 ? 'on' : 'off' %>">
            <%= u1s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u1s1" class="sub-switch <%= u1s1 ? 'on' : 'off' %>">
            <%= u1s1 ? 'On' : 'Off' %>
          </button>
          <button id="u1s2" class="sub-switch <%= u1s2 ? 'on' : 'off' %>">
            <%= u1s2 ? 'On' : 'Off' %>
          </button>
          <button id="u1s3" class="sub-switch <%= u1s3 ? 'on' : 'off' %>">
            <%= u1s3 ? 'On' : 'Off' %>
          </button>
          <button id="u1s4" class="sub-switch <%= u1s4 ? 'on' : 'off' %>">
            <%= u1s4 ? 'On' : 'Off' %>
          </button>
          <button id="u1s5" class="sub-switch <%= u1s5 ? 'on' : 'off' %>">
            <%= u1s5 ? 'On' : 'Off' %>
          </button>
          <button id="u1s6" class="sub-switch <%= u1s6 ? 'on' : 'off' %>">
            <%= u1s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>

      <!-- User 2 -->
      <div class="user-section">
        <h2>User: User 2</h2>
        <div class="switch-container">
          <button id="u2s0" class="main-switch <%= u2s0 ? 'on' : 'off' %>">
            <%= u2s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u2s1" class="sub-switch <%= u2s1 ? 'on' : 'off' %>">
            <%= u2s1 ? 'On' : 'Off' %>
          </button>
          <button id="u2s2" class="sub-switch <%= u2s2 ? 'on' : 'off' %>">
            <%= u2s2 ? 'On' : 'Off' %>
          </button>
          <button id="u2s3" class="sub-switch <%= u2s3 ? 'on' : 'off' %>">
            <%= u2s3 ? 'On' : 'Off' %>
          </button>
          <button id="u2s4" class="sub-switch <%= u2s4 ? 'on' : 'off' %>">
            <%= u2s4 ? 'On' : 'Off' %>
          </button>
          <button id="u2s5" class="sub-switch <%= u2s5 ? 'on' : 'off' %>">
            <%= u2s5 ? 'On' : 'Off' %>
          </button>
          <button id="u2s6" class="sub-switch <%= u2s6 ? 'on' : 'off' %>">
            <%= u2s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>
      <!-- User 3 -->
      <div class="user-section">
        <h2>User: User 3</h2>
        <div class="switch-container">
          <button id="u3s0" class="main-switch <%= u3s0 ? 'on' : 'off' %>">
            <%= u3s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u3s1" class="sub-switch <%= u3s1 ? 'on' : 'off' %>">
            <%= u3s1 ? 'On' : 'Off' %>
          </button>
          <button id="u3s2" class="sub-switch <%= u3s2 ? 'on' : 'off' %>">
            <%= u3s2 ? 'On' : 'Off' %>
          </button>
          <button id="u3s3" class="sub-switch <%= u3s3 ? 'on' : 'off' %>">
            <%= u3s3 ? 'On' : 'Off' %>
          </button>
          <button id="u3s4" class="sub-switch <%= u3s4 ? 'on' : 'off' %>">
            <%= u3s4 ? 'On' : 'Off' %>
          </button>
          <button id="u3s5" class="sub-switch <%= u3s5 ? 'on' : 'off' %>">
            <%= u3s5 ? 'On' : 'Off' %>
          </button>
          <button id="u3s6" class="sub-switch <%= u3s6 ? 'on' : 'off' %>">
            <%= u3s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>
      <!-- User 4 -->
      <div class="user-section">
        <h2>User: User 4</h2>
        <div class="switch-container">
          <button id="u4s0" class="main-switch <%= u4s0 ? 'on' : 'off' %>">
            <%= u4s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u4s1" class="sub-switch <%= u4s1 ? 'on' : 'off' %>">
            <%= u4s1 ? 'On' : 'Off' %>
          </button>
          <button id="u4s2" class="sub-switch <%= u4s2 ? 'on' : 'off' %>">
            <%= u4s2 ? 'On' : 'Off' %>
          </button>
          <button id="u4s3" class="sub-switch <%= u4s3 ? 'on' : 'off' %>">
            <%= u4s3 ? 'On' : 'Off' %>
          </button>
          <button id="u4s4" class="sub-switch <%= u4s4 ? 'on' : 'off' %>">
            <%= u4s4 ? 'On' : 'Off' %>
          </button>
          <button id="u4s5" class="sub-switch <%= u4s5 ? 'on' : 'off' %>">
            <%= u4s5 ? 'On' : 'Off' %>
          </button>
          <button id="u4s6" class="sub-switch <%= u4s6 ? 'on' : 'off' %>">
            <%= u4s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>
      <!-- User 5 -->
      <div class="user-section">
        <h2>User: User 5</h2>
        <div class="switch-container">
          <button id="u5s0" class="main-switch <%= u5s0 ? 'on' : 'off' %>">
            <%= u5s0 ? 'Main On' : 'Main Off' %>
          </button>
          <button id="u5s1" class="sub-switch <%= u5s1 ? 'on' : 'off' %>">
            <%= u5s1 ? 'On' : 'Off' %>
          </button>
          <button id="u5s2" class="sub-switch <%= u5s2 ? 'on' : 'off' %>">
            <%= u5s2 ? 'On' : 'Off' %>
          </button>
          <button id="u5s3" class="sub-switch <%= u5s3 ? 'on' : 'off' %>">
            <%= u5s3 ? 'On' : 'Off' %>
          </button>
          <button id="u5s4" class="sub-switch <%= u5s4 ? 'on' : 'off' %>">
            <%= u5s4 ? 'On' : 'Off' %>
          </button>
          <button id="u5s5" class="sub-switch <%= u5s5 ? 'on' : 'off' %>">
            <%= u5s5 ? 'On' : 'Off' %>
          </button>
          <button id="u5s6" class="sub-switch <%= u5s6 ? 'on' : 'off' %>">
            <%= u5s6 ? 'On' : 'Off' %>
          </button>
        </div>
      </div>
    </div>

    <script>
      // Function to toggle a switch for a specific user
      function toggleSwitch(userId, switchId) {
        fetch(`/admin/switches/${userId}/${switchId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
        })
          .then((response) => {
            if (!response.ok) {
              console.error("Failed to toggle switch");
              return;
            }
            return response.json();
          })
          .then((result) => {
            console.log("Switch toggled successfully:", result);
            const button = document.getElementById(`${userId}s${switchId}`);
            const isOn = button.classList.contains("on");
            button.textContent = isOn ? "Off" : "On";
            button.classList.toggle("on");
            button.classList.toggle("off");
          })
          .catch((err) => {
            console.error("Error toggling switch:", err);
          });
      }
    </script>
  </body>
</html>
